<html>
<head>
</head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<center>
<h2>장비 카드</h2>
</center>

<form name="test">
<table>
<tr><td>레이저 포</td><td><input type="text" size="10" name="a" value="0"></td></tr>
<tr><td>파동 미사일</td><td><input type="text" size="10" name="y" value="0"></td></tr>
<tr><td>화이터 ( 전투기 )</td><td><input type="text" size="10" name="x" value="0"></td></tr>
<tr><td>슬루프</td><td><input type="text" size="10" name="x" value="0"></td></tr>
<tr><td>정찰정</td><td><input type="text" size="10" name="x" value="0"></td></tr>
<tr>
	<td colspan='2' style="padding-top: 30px;">
		<button type="button" onclick="rollingDice();">주사위 굴리기</button>
	</td>
</tr>
<tr>
	<td colspan='2'>
		<div id="trump_card_1" style="font-size:50px;"></div>
	</td>
</tr>
<tr>
	<td>
		<input type="text" id="htm_name" placeholder="htm 이름 (예: 0001)" style="width:120px;" enterkeyhint="go" onkeydown="if(event.key==='Enter'){loadGameToParent();}">
		<button type="button" onclick="loadGameToParent();">페이지 불러오기</button>
	</td>
</tr>
</table>
</form>


<script>
// 주사위 굴리기
let dice = ["⚀", "⚁", "⚂", "⚃", "⚄", "⚅"];
let x=0;
const element = document.getElementById('trump_card_1');

function rollingDice()
{	
	element.innerHTML = '';
	
	x = Math.floor(Math.random() * 6);
	element.innerHTML = dice[x];
}

function loadGameToParent()
{
	let htm_name = document.getElementById('htm_name').value;
	if (htm_name.length < 4) {
		htm_name = htm_name.padStart(4, '0');
		document.getElementById('htm_name').value = htm_name;
	}

	if (htm_name.length > 4) {
		htm_name = htm_name.slice(-4);
		document.getElementById('htm_name').value = htm_name;
	}
	
	let gameFrame = window.parent.document.querySelector('frame[name="game"]');
	if (gameFrame) {
		gameFrame.src = `${htm_name}.htm`;
		gameFrame.onload = function() {
			try {
				// 프레임 내 문서가 정상적으로 로드되었는지 확인
				if (gameFrame.contentDocument.body.innerHTML.trim() === "") {
					alert("페이지가 없습니다.");
					return;
				}
			} catch (e) {
				alert("페이지가 없습니다.");
				return;
			}
		};
	} else {
		alert("게임 영역을 찾을 수 없습니다.");
		return;
	}
}

</script>

</body>
</html>